{{/*
  Enhanced structured data for better SEO
  Usage: {{ partial "structured-data.html" . }}
*/}}

{{/* Organization Schema */}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Kerala Reisen",
  "url": "{{ .Site.BaseURL }}",
  "logo": "{{ .Site.BaseURL }}images/keralareisenLogo.png",
  "contactPoint": {
    "@type": "ContactPoint",
    "contactType": "customer service",
    "areaServed": "DE",
    "availableLanguage": "German",
    "telephone": "+49-152-33145220"
  },
  "sameAs": [
    "https://www.facebook.com/keralareisen",
    "https://www.instagram.com/keralareisen",
    "https://twitter.com/keralareisen"
  ],
  "foundingDate": "2020",
  "description": "Deutschsprachige Reiseberatung für authentische Kerala-Reisen, Ayurveda-Kuren, Yoga-Retreats und Rundreisen"
}
</script>

{{/* Local Business Schema */}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "name": "Kerala Reisen",
  "image": "{{ .Site.BaseURL }}images/keralareisenLogo.png",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "Meyerhofstraße 9",
    "addressLocality": "Kiel",
    "postalCode": "24106",
    "addressCountry": "DE"
  },
  "priceRange": "$$",
  "openingHours": "Mo-Fr 09:00-18:00,Sa 10:00-14:00",
  "telephone": "+49-152-33145220",
  "url": "{{ .Site.BaseURL }}",
  "description": "Deutschsprachige Beratung für Kerala-Reisen, Ayurveda-Kuren und Yoga-Retreats"
}
</script>

{{/* Service Schema */}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Service",
  "areaServed": {
    "@type": "Country",
    "name": "Deutschland"
  },
  "description": "Deutschsprachige Beratung für Kerala-Reisen: Ayurveda-Kuren, Yoga-Retreats, Rundreisen und Backwaters-Erlebnisse in Kerala, Indien",
  "name": "Kerala Reisen",
  "offers": {
    "@type": "Offer",
    "availability": "https://schema.org/InStock",
    "priceCurrency": "EUR",
    "priceRange": "290-3000 EUR"
  },
  "provider": {
    "@type": "Organization",
    "name": "Kerala Reisen"
  },
  "serviceType": "Reiseberatung",
  "category": "Travel Agency"
}
</script>

{{/* WebSite Schema with SearchAction */}}
{{- if eq .Kind "home" -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "url": "{{ .Site.BaseURL }}",
  "name": "Kerala Reisen",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "{{ .Site.BaseURL }}?q={search_term_string}",
    "query-input": "required name=search_term_string"
  },
  "description": "Authentische Kerala-Reisen mit deutschsprachiger Beratung"
}
</script>
{{- end -}}

{{/* Product/Tour Schema for individual tours */}}
{{- if eq .Type "reisen" -}}
{{- $price := cond (isset .Params "pricefrom") .Params.pricefrom (or .Params.priceFrom "") -}}
{{- $img := or .Params.image (.Site.Params.defaultImage) -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "TouristTrip",
  "name": "{{ .Title }}",
  "description": "{{ .Description }}",
  "image": "{{ $img }}",
  "offers": {
    "@type": "Offer",
    "price": "{{ $price }}",
    "priceCurrency": "EUR",
    "availability": "https://schema.org/InStock"
  },
  "itinerary": [
    {
      "@type": "Trip",
      "name": "{{ .Title }}"
    }
  ],
  "touristType": "Leisure",
  "provider": {
    "@type": "Organization",
    "name": "Kerala Reisen"
  }
}
</script>
{{- end -}}

{{/* Article Schema for blog posts */}}
{{- if eq .Type "blog" -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "{{ .Title }}",
  "description": "{{ .Description }}",
  "image": "{{ .Params.image }}",
  "author": {
    "@type": "Person",
    "name": "Kerala Reisen Team",
    "url": "{{ .Site.BaseURL }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Kerala Reisen",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ .Site.BaseURL }}images/keralareisenLogo.png"
    }
  },
  "datePublished": "{{ .Date.Format "2006-01-02" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02" }}",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  }
}
</script>
{{- end -}}

{{/* FAQ Schema - Only for pages that have FAQ data */}}
{{- if and .Params.faq (gt (len .Params.faq) 0) -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {{- range $index, $faq := .Params.faq -}}
    {{- if and $faq.question $faq.answer -}}
    {
      "@type": "Question",
      "name": "{{ $faq.question }}",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "{{ $faq.answer }}"
      }
    }{{- if ne $index (sub (len $.Params.faq) 1) -}},{{- end -}}
    {{- end -}}
    {{- end -}}
  ]
}
</script>
{{- end -}}

{{/* Breadcrumb Schema - Simplified version */}}
{{- if ne .Kind "home" -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ .Site.BaseURL }}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{{ .Title }}",
      "item": "{{ .Permalink }}"
    }
  ]
}
</script>
{{- end -}}

{{/* Review Schema for tours with reviews */}}
{{- if and (eq .Type "reisen") .Params.reviews (gt (len .Params.reviews) 0) -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Product",
  "name": "{{ .Title }}",
  "image": "{{ or .Params.image .Site.Params.defaultImage }}",
  "description": "{{ .Description }}",
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "{{ or .Params.ratingValue 4.5 }}",
    "reviewCount": "{{ or .Params.reviewCount (len .Params.reviews) }}",
    "bestRating": 5,
    "worstRating": 1
  },
  "review": [
    {{- range $index, $review := .Params.reviews -}}
    {{- if and $review.name $review.rating $review.text -}}
    {
      "@type": "Review",
      "author": {
        "@type": "Person",
        "name": "{{ $review.name }}"
      },
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": "{{ $review.rating }}",
        "bestRating": 5
      },
      "reviewBody": "{{ $review.text }}"{{- if $review.date -}},
      "datePublished": "{{ $review.date }}"{{- end -}}
    }{{- if ne $index (sub (len $.Params.reviews) 1) -}},{{- end -}}
    {{- end -}}
    {{- end -}}
  ]
}
</script>
{{- end -}}
