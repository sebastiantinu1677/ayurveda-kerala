{{/*
  Simple lead capture form - WhatsApp only solution
  Usage: {{ partial "lead-capture-simple.html" . }}
*/}}
<div class="bg-gradient-to-r from-yellow-50 to-green-50 border border-yellow-200 rounded-lg p-6 md:p-8">
  <div class="text-center mb-6">
    <h3 class="text-2xl font-bold text-gray-800 mb-2">Kostenloser Kerala Reiseführer</h3>
    <p class="text-gray-600">Erhalten Sie unseren 15-seitigen Guide mit Insider-Tipps, Packliste und Ayurveda-Basics per E-Mail.</p>
  </div>
  
  <form id="leadCaptureForm" class="space-y-4" onsubmit="return handleLeadCapture(event)">
    <div class="grid md:grid-cols-2 gap-4">
      <input 
        type="text" 
        name="firstName" 
        placeholder="Vorname" 
        required 
        class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-yellow-500 focus:border-transparent"
      >
      <input 
        type="text" 
        name="lastName" 
        placeholder="Nachname" 
        required 
        class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-yellow-500 focus:border-transparent"
      >
    </div>
    
    <input 
      type="email" 
      name="email" 
      placeholder="E-Mail-Adresse" 
      required 
      class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-yellow-500 focus:border-transparent"
    >
    
    <div class="flex items-start gap-3">
      <input 
        type="checkbox" 
        name="newsletter" 
        id="newsletter" 
        class="mt-1 h-4 w-4 text-yellow-600 focus:ring-yellow-500 border-gray-300 rounded"
      >
      <label for="newsletter" class="text-sm text-gray-600">
        Ich möchte auch über neue Reiseangebote und Ayurveda-Tipps informiert werden (kann jederzeit abbestellt werden)
      </label>
    </div>
    
    <button 
      type="submit" 
      class="w-full bg-yellow-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-yellow-700 transition-colors duration-200 flex items-center justify-center gap-2"
    >
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
      </svg>
      Reiseführer anfordern
    </button>
    
    <p class="text-xs text-gray-500 text-center">
      Wir senden Ihnen den Reiseführer innerhalb von 24 Stunden per E-Mail
    </p>
  </form>
  
  <div id="successMessage" class="hidden text-center py-4">
    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg">
      <p class="font-semibold">Vielen Dank für Ihre Anfrage!</p>
      <p>Wir senden Ihnen den Reiseführer innerhalb von 24 Stunden per E-Mail an <span id="userEmail"></span></p>
      <p class="text-sm mt-2">Sie erhalten auch eine WhatsApp-Bestätigung von uns.</p>
    </div>
  </div>
</div>

<script>
function handleLeadCapture(e) {
  e.preventDefault();
  
  const form = document.getElementById('leadCaptureForm');
  const formData = new FormData(form);
  const data = {
    firstName: formData.get('firstName'),
    lastName: formData.get('lastName'),
    email: formData.get('email'),
    newsletter: formData.get('newsletter') === 'on',
    source: 'Website Lead Capture',
    timestamp: new Date().toISOString()
  };
  
  // Show loading state
  const submitBtn = form.querySelector('button[type="submit"]');
  const originalText = submitBtn.innerHTML;
  submitBtn.innerHTML = '<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Wird gesendet...';
  submitBtn.disabled = true;
  
  // Simulate processing time
  setTimeout(() => {
    // Show success message
    form.style.display = 'none';
    document.getElementById('userEmail').textContent = data.email;
    document.getElementById('successMessage').classList.remove('hidden');
    
    // Send lead notification to WhatsApp
    const message = `Neue Reiseführer-Anfrage:
Name: ${data.firstName} ${data.lastName}
E-Mail: ${data.email}
Newsletter: ${data.newsletter ? 'Ja' : 'Nein'}
Quelle: Website Lead Capture

Bitte senden Sie den Reiseführer per E-Mail.`;
    
    const whatsappUrl = `https://wa.me/{{ .Site.Params.whatsapp.number }}?text=${encodeURIComponent(message)}`;
    window.open(whatsappUrl, '_blank');
    
  }, 1500); // 1.5 second delay to show loading state
  
  return false;
}
</script>
